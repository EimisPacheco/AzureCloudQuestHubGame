{"ast":null,"code":"import _regeneratorRuntime from \"/Users/eimis/test-server/react_projects/cloud-architecture-game/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/eimis/test-server/react_projects/cloud-architecture-game/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/eimis/test-server/react_projects/cloud-architecture-game/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/eimis/test-server/react_projects/cloud-architecture-game/src/components/GamePresenter.jsx\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { motion } from \"framer-motion\";\nimport AWSArchitectureDisplay from './AWSArchitectureDisplay';\nimport ServiceOptionsPanel from './ServiceOptionsPanel';\nimport QuestionDisplay from './QuestionDisplay';\nimport { generateArchitecture } from '../services/AWSArchitectureAI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar GamePresenter = function GamePresenter() {\n  _s();\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    currentArchitecture = _useState2[0],\n    setCurrentArchitecture = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    currentQuestion = _useState4[0],\n    setCurrentQuestion = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    options = _useState6[0],\n    setOptions = _useState6[1];\n  var _useState7 = useState(0),\n    _useState8 = _slicedToArray(_useState7, 2),\n    score = _useState8[0],\n    setScore = _useState8[1];\n  var _useState9 = useState(true),\n    _useState10 = _slicedToArray(_useState9, 2),\n    isLoading = _useState10[0],\n    setIsLoading = _useState10[1];\n  var fetchNextArchitecture = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var data;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            setIsLoading(true);\n            _context.prev = 1;\n            _context.next = 4;\n            return generateArchitecture('BEGINNER');\n          case 4:\n            data = _context.sent;\n            console.log('Fetched data:', data);\n            setCurrentArchitecture(data.architecture);\n            setCurrentQuestion(data.question);\n            setOptions(data.options);\n            _context.next = 14;\n            break;\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](1);\n            console.error('Error fetching architecture:', _context.t0);\n          case 14:\n            _context.prev = 14;\n            setIsLoading(false);\n            return _context.finish(14);\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[1, 11, 14, 17]]);\n    }));\n    return function fetchNextArchitecture() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    fetchNextArchitecture();\n  }, []);\n  var handleServiceSelection = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(selectedService) {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!isLoading) {\n              _context2.next = 2;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 2:\n            if (!(currentQuestion !== null && currentQuestion !== void 0 && currentQuestion.missingServices.includes(selectedService))) {\n              _context2.next = 6;\n              break;\n            }\n            setScore(function (prev) {\n              return prev + 1;\n            });\n            _context2.next = 6;\n            return fetchNextArchitecture();\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n    return function handleServiceSelection(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return /*#__PURE__*/_jsxDEV(DndProvider, {\n    backend: HTML5Backend,\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"game-container\",\n      initial: {\n        opacity: 0\n      },\n      animate: {\n        opacity: 1\n      },\n      transition: {\n        duration: 0.5\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"score-display\",\n          children: [\"Score: \", score]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"level-display\",\n          children: \"Level: BEGINNER\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(QuestionDisplay, {\n        question: currentQuestion,\n        isLoading: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"architecture-section\",\n        children: /*#__PURE__*/_jsxDEV(AWSArchitectureDisplay, {\n          architecture: currentArchitecture,\n          missingServices: (currentQuestion === null || currentQuestion === void 0 ? void 0 : currentQuestion.missingServices) || [],\n          onServiceClick: handleServiceSelection\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(ServiceOptionsPanel, {\n        options: options,\n        onSelect: handleServiceSelection,\n        isLoading: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, _this);\n};\n_s(GamePresenter, \"rV04CfEzogCP7mVn3OawyHE+NTI=\");\n_c = GamePresenter;\nexport default GamePresenter;\nvar _c;\n$RefreshReg$(_c, \"GamePresenter\");","map":{"version":3,"names":["React","useState","useEffect","DndProvider","HTML5Backend","motion","AWSArchitectureDisplay","ServiceOptionsPanel","QuestionDisplay","generateArchitecture","jsxDEV","_jsxDEV","GamePresenter","_s","_useState","_useState2","_slicedToArray","currentArchitecture","setCurrentArchitecture","_useState3","_useState4","currentQuestion","setCurrentQuestion","_useState5","_useState6","options","setOptions","_useState7","_useState8","score","setScore","_useState9","_useState10","isLoading","setIsLoading","fetchNextArchitecture","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","sent","console","log","architecture","question","t0","error","finish","stop","apply","arguments","handleServiceSelection","_ref2","_callee2","selectedService","_callee2$","_context2","abrupt","missingServices","includes","_x","backend","children","div","className","initial","opacity","animate","transition","duration","fileName","_jsxFileName","lineNumber","columnNumber","_this","onServiceClick","onSelect","_c","$RefreshReg$"],"sources":["/Users/eimis/test-server/react_projects/cloud-architecture-game/src/components/GamePresenter.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { motion } from \"framer-motion\";\nimport AWSArchitectureDisplay from './AWSArchitectureDisplay';\nimport ServiceOptionsPanel from './ServiceOptionsPanel';\nimport QuestionDisplay from './QuestionDisplay';\nimport { generateArchitecture } from '../services/AWSArchitectureAI';\n\nconst GamePresenter = () => {\n  const [currentArchitecture, setCurrentArchitecture] = useState(null);\n  const [currentQuestion, setCurrentQuestion] = useState(null);\n  const [options, setOptions] = useState([]);\n  const [score, setScore] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const fetchNextArchitecture = async () => {\n    setIsLoading(true);\n    try {\n      const data = await generateArchitecture('BEGINNER');\n      console.log('Fetched data:', data);\n      setCurrentArchitecture(data.architecture);\n      setCurrentQuestion(data.question);\n      setOptions(data.options);\n    } catch (error) {\n      console.error('Error fetching architecture:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchNextArchitecture();\n  }, []);\n\n  const handleServiceSelection = async (selectedService) => {\n    if (isLoading) return;\n    \n    if (currentQuestion?.missingServices.includes(selectedService)) {\n      setScore(prev => prev + 1);\n      await fetchNextArchitecture();\n    }\n  };\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <motion.div \n        className=\"game-container\"\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ duration: 0.5 }}\n      >\n        <div className=\"game-header\">\n          <div className=\"score-display\">Score: {score}</div>\n          <div className=\"level-display\">Level: BEGINNER</div>\n        </div>\n\n        {/* Question Display */}\n        <QuestionDisplay \n          question={currentQuestion}\n          isLoading={isLoading}\n        />\n\n        {/* Architecture Display */}\n        <div className=\"architecture-section\">\n          <AWSArchitectureDisplay \n            architecture={currentArchitecture}\n            missingServices={currentQuestion?.missingServices || []}\n            onServiceClick={handleServiceSelection}\n          />\n        </div>\n\n        {/* Service Options */}\n        <ServiceOptionsPanel \n          options={options}\n          onSelect={handleServiceSelection}\n          isLoading={isLoading}\n        />\n      </motion.div>\n    </DndProvider>\n  );\n};\n\nexport default GamePresenter;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
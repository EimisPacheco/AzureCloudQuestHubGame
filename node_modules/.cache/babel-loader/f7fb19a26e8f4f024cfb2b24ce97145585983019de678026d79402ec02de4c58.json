{"ast":null,"code":"var _jsxFileName = \"/Users/eimis/test-server/react_projects/cloud-architecture-game copy 20- copy 2/src/components/AWSArchitectureGame.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { DndContext, useSensor, useSensors, PointerSensor, TouchSensor } from '@dnd-kit/core';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport AWSArchitectureDisplay from './AWSArchitectureDisplay';\nimport DraggableService from './DraggableService';\nimport { getCachedServiceIcon, SERVICE_MAPPINGS } from '../services/IconResolver';\nimport '../styles/DifficultyButtons.css';\nimport '../styles/AWSArchitectureGame.css';\nimport ReactConfetti from 'react-confetti';\nimport { useWindowSize } from 'react-use';\nimport '../styles/z-index.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst S3_BUCKET_URL = 'https://hackthon-backend-files-ep-2024.s3.amazonaws.com';\nconst ICONS_BASE_PATH = '/amazon-icons-set/Architecture-Service-Icons_06072024';\nconst API_URL = 'https://p7bwtrx47e.execute-api.us-east-1.amazonaws.com/stage/amazon-architecture';\nconst isValidArchitecture = data => {\n  if (!data || !Array.isArray(data.services) || !Array.isArray(data.connections)) {\n    console.warn(\"⚠️ Invalid JSON structure: Missing 'services' or 'connections'. Retrying...\");\n    return false;\n  }\n  const requiredMissingServices = ['missing_1', 'missing_2', 'missing_3'];\n  const serviceNames = data.services.map(service => typeof service === 'string' ? service : service === null || service === void 0 ? void 0 : service.name);\n  if (!requiredMissingServices.every(ms => serviceNames.includes(ms))) {\n    console.warn(`⚠️ JSON is invalid: One or more missing services (${requiredMissingServices.join(', ')}) are missing.`);\n    return false;\n  }\n  const connectionNodes = new Set();\n  data.connections.forEach(conn => {\n    connectionNodes.add(conn.from);\n    connectionNodes.add(conn.to);\n  });\n  if (!requiredMissingServices.every(ms => connectionNodes.has(ms))) {\n    console.warn(`⚠️ JSON is invalid: One or more missing services (${requiredMissingServices.join(', ')}) are missing from the connections.`);\n    return false;\n  }\n  return true;\n};\nconst validateJSONStructure = (json, difficulty) => {\n  let requiredMissingServices = ['missing_1', 'missing_2', 'missing_3'];\n  if (difficulty === 'INTERMEDIATE') {\n    requiredMissingServices = ['missing_1', 'missing_2', 'missing_3', 'missing_4', 'missing_5'];\n  } else if (difficulty === 'ADVANCED') {\n    requiredMissingServices = ['missing_1', 'missing_2', 'missing_3', 'missing_4', 'missing_5', 'missing_6', 'missing_7'];\n  }\n  return requiredMissingServices.every(service => json.missingServices.includes(service));\n};\nconst getMaxPossibleScore = difficulty => {\n  switch (difficulty) {\n    case 'INTERMEDIATE':\n      return 25;\n    // 5 questions * 5 points\n    case 'ADVANCED':\n      return 35;\n    // 7 questions * 5 points\n    default:\n      // BEGINNER\n      return 15;\n    // 3 questions * 5 points\n  }\n};\nconst AWSArchitectureGame = () => {\n  _s();\n  var _architectureInfo$mis, _architectureInfo$mis2;\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [architecture, setArchitecture] = useState(null);\n  const [architectureInfo, setArchitectureInfo] = useState(null);\n  const [currentQuestion, setCurrentQuestion] = useState(null);\n  const [difficulty, setDifficulty] = useState('BEGINNER');\n  const [score, setScore] = useState(0);\n  const [showFeedback, setShowFeedback] = useState(false);\n  const [feedback, setFeedback] = useState({\n    isCorrect: false,\n    message: '',\n    points: 0\n  });\n  const [currentMissingServiceIndex, setCurrentMissingServiceIndex] = useState(0);\n  const [questionStartTime, setQuestionStartTime] = useState(null);\n  const [elapsedTime, setElapsedTime] = useState(0);\n  const {\n    width,\n    height\n  } = useWindowSize();\n  const [showConfetti, setShowConfetti] = useState(false);\n  const [showFireworks, setShowFireworks] = useState(false);\n  const [showSadFace, setShowSadFace] = useState(false);\n  const sensors = useSensors(useSensor(PointerSensor, {\n    activationConstraint: {\n      distance: 8\n    }\n  }), useSensor(TouchSensor));\n  const getServiceIcon = serviceName => {\n    if (!serviceName) {\n      console.error('No service name provided to getServiceIcon');\n      return null;\n    }\n    if (serviceName.toLowerCase().includes('missing')) {\n      console.log('Loading missing service icon locally:', '/aws-icons/missing.svg');\n      return '/aws-icons/missing.svg';\n    }\n    const cleanedServiceName = serviceName.toLowerCase().replace(/^(amazon|aws)\\s+/, '').replace(/\\s+/g, '-');\n    const potentialS3Url = `${S3_BUCKET_URL}${ICONS_BASE_PATH}/Arch_${cleanedServiceName}_64.svg`;\n    console.log(`🔍 Attempting to load icon for \"${serviceName}\" from: ${potentialS3Url}`);\n    const resolvedIcon = getCachedServiceIcon(serviceName);\n    if (resolvedIcon) {\n      console.log(`✅ Successfully resolved icon for \"${serviceName}\": ${resolvedIcon}`);\n      return resolvedIcon;\n    }\n    console.warn(`❌ Icon not found for \"${serviceName}\" at attempted path: ${potentialS3Url}`);\n    return '/aws-icons/default.svg';\n  };\n  const loadNextArchitecture = useCallback(async () => {\n    var _data$missingServices;\n    setScore(0); // Reset score when loading new architecture\n    if (isLoading) return;\n    setIsLoading(true);\n    setError(null);\n    let attempt = 0;\n    let isValid = false;\n    let data = null;\n    let maxAttempts = 7;\n    while (!isValid && attempt < maxAttempts) {\n      try {\n        console.log(`🔄 Attempt ${attempt + 1}: Fetching architecture data...`);\n        const response = await fetch(API_URL, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            difficulty\n          })\n        });\n        if (response.status === 503) {\n          console.warn(\"⚠️ Received 503 error. Retrying in 3 seconds...\");\n          attempt++;\n          await new Promise(resolve => setTimeout(resolve, 3000));\n          continue;\n        }\n        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n        data = await response.json();\n        console.log('Raw AI Response:', JSON.stringify(data, null, 2));\n        console.log(\"📥 Received AI Response:\", JSON.stringify(data, null, 2));\n        isValid = isValidArchitecture(data);\n        if (!isValid) {\n          console.warn(`⛔ Invalid JSON structure. Retrying in 3 seconds...`);\n          await new Promise(resolve => setTimeout(resolve, 3000));\n        } else {\n          console.log(\"✅ Valid architecture received, updating state...\");\n          break;\n        }\n      } catch (error) {\n        console.error(\"❌ Failed to load architecture:\", error);\n        if (attempt >= maxAttempts - 1) {\n          setError(error.message);\n          setIsLoading(false);\n          return;\n        }\n        await new Promise(resolve => setTimeout(resolve, 3000)); // Wait 3 seconds before retrying\n      }\n      attempt++;\n    }\n    if (!isValid) {\n      console.error(\"❌ Maximum retries reached. Unable to get valid JSON.\");\n      setError(\"Failed to fetch a valid architecture after multiple attempts.\");\n      setIsLoading(false);\n      return;\n    }\n    const transformedServices = data.services.map(serviceName => ({\n      id: serviceName.toLowerCase().replace(/[^a-z0-9]+/g, '-'),\n      name: serviceName,\n      icon: getServiceIcon(serviceName)\n    }));\n    setArchitecture({\n      services: transformedServices,\n      connections: data.connections\n    });\n    if (((_data$missingServices = data.missingServices) === null || _data$missingServices === void 0 ? void 0 : _data$missingServices.length) > 0) {\n      const currentMissingService = data.missingServices[0];\n      setCurrentQuestion({\n        text: currentMissingService.question,\n        optimizationFocus: currentMissingService.optimizationFocus,\n        options: currentMissingService.options.map(opt => ({\n          id: opt.service.toLowerCase().replace(/\\s+/g, '-'),\n          name: opt.service,\n          isCorrect: opt.isCorrect,\n          isOptimal: opt.isOptimal,\n          explanation: opt.explanation,\n          rating: opt.rating,\n          icon: getServiceIcon(opt.service)\n        }))\n      });\n    }\n    setArchitectureInfo({\n      name: data.architecture.name,\n      description: data.architecture.description,\n      missingServices: data.missingServices\n    });\n    setCurrentMissingServiceIndex(0);\n    setShowFeedback(false);\n    setQuestionStartTime(Date.now());\n    setElapsedTime(0);\n    setIsLoading(false);\n  }, [difficulty]);\n  const handleServiceSelection = selectedService => {\n    if (!(architectureInfo !== null && architectureInfo !== void 0 && architectureInfo.missingServices)) return;\n    const currentMissingService = architectureInfo.missingServices[currentMissingServiceIndex];\n    const selectedOption = currentMissingService.options.find(opt => opt.service === selectedService);\n    const correctOption = currentMissingService.options.find(opt => opt.isCorrect);\n    const optimalOption = currentMissingService.options.find(opt => opt.isOptimal);\n    if (selectedOption) {\n      setShowFeedback(true);\n      if (selectedOption.isCorrect) {\n        // Calculate points based on whether it's optimal or just correct\n        const points = selectedOption.isOptimal ? 5 : 2;\n        setScore(prevScore => {\n          const newScore = prevScore + points;\n          // Check if we've reached the maximum possible score for current difficulty\n          if (newScore === getMaxPossibleScore(difficulty)) {\n            setShowFireworks(true);\n            setTimeout(() => setShowFireworks(false), 5000);\n          }\n          return newScore;\n        });\n        if (selectedOption.isOptimal) {\n          setShowConfetti(true);\n          setTimeout(() => setShowConfetti(false), 2000);\n        }\n        setFeedback({\n          isCorrect: true,\n          message: selectedOption.explanation,\n          points: points,\n          isOptimal: selectedOption.isOptimal,\n          optimalSolution: !selectedOption.isOptimal ? optimalOption.service : null,\n          optimalExplanation: !selectedOption.isOptimal ? optimalOption.explanation : null\n        });\n      } else {\n        setShowSadFace(true);\n        setTimeout(() => setShowSadFace(false), 4000);\n        setFeedback({\n          isCorrect: false,\n          message: `<div class=\"feedback-explanation\">\n              <p>${selectedOption.explanation}</p>\n              <div class=\"correct-answer-wrapper\">\n                <p class=\"correct-answer-section\">\n                  <span style=\"color: lime; font-weight: bold;\">The correct answer was: </span>\n                  <strong>${correctOption.service}</strong>. ${correctOption.explanation}\n                </p>\n              </div>\n            </div>`,\n          points: 0,\n          correctAnswer: correctOption.service\n        });\n      }\n    }\n  };\n  const handleNext = () => {\n    if (!(architectureInfo !== null && architectureInfo !== void 0 && architectureInfo.missingServices)) return;\n    setShowFeedback(false);\n    if (currentMissingServiceIndex < architectureInfo.missingServices.length - 1) {\n      const nextIndex = currentMissingServiceIndex + 1;\n      setCurrentMissingServiceIndex(nextIndex);\n      const nextMissingService = architectureInfo.missingServices[nextIndex];\n      setCurrentQuestion({\n        text: nextMissingService.question,\n        optimizationFocus: nextMissingService.optimizationFocus,\n        options: nextMissingService.options.map(opt => ({\n          id: opt.service.toLowerCase().replace(/\\s+/g, '-'),\n          name: opt.service,\n          isCorrect: opt.isCorrect,\n          isOptimal: opt.isOptimal,\n          explanation: opt.explanation,\n          rating: opt.rating,\n          icon: getServiceIcon(opt.service)\n        }))\n      });\n      setQuestionStartTime(Date.now());\n      setElapsedTime(0);\n    }\n  };\n  const handleDifficultyChange = level => {\n    setDifficulty(level);\n  };\n  useEffect(() => {\n    if (currentQuestion && !questionStartTime) {\n      setQuestionStartTime(Date.now());\n    }\n    const timer = setInterval(() => {\n      if (questionStartTime && !showFeedback) {\n        const elapsed = Math.floor((Date.now() - questionStartTime) / 1000);\n        setElapsedTime(elapsed);\n      }\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [currentQuestion, questionStartTime, showFeedback]);\n  return /*#__PURE__*/_jsxDEV(DndProvider, {\n    backend: HTML5Backend,\n    children: /*#__PURE__*/_jsxDEV(DndContext, {\n      sensors: sensors,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative',\n          minHeight: '100vh'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"game-content\",\n          children: [showConfetti && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'fixed',\n              top: 0,\n              left: 0,\n              width: '100%',\n              height: '100%',\n              zIndex: 1000,\n              pointerEvents: 'none'\n            },\n            children: /*#__PURE__*/_jsxDEV(ReactConfetti, {\n              width: width,\n              height: height,\n              recycle: false,\n              numberOfPieces: 200\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"game-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"game-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: (architectureInfo === null || architectureInfo === void 0 ? void 0 : architectureInfo.name) || 'AWS Architecture Challenge'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"game-stats\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"score\",\n                  children: [\"Score: \", score]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"complexity\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"complexity-icon\",\n                    children: \"\\uD83C\\uDFAF\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 366,\n                    columnNumber: 23\n                  }, this), difficulty]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 21\n                }, this), currentQuestion && !showFeedback && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `timer ${elapsedTime > 60 ? 'danger' : elapsedTime > 30 ? 'warning' : ''}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"timer-icon\",\n                    children: \"\\u23F1\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 374,\n                    columnNumber: 25\n                  }, this), Math.floor(elapsedTime / 60), \":\", (elapsedTime % 60).toString().padStart(2, '0')]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"new-architecture-button\",\n                onClick: loadNextArchitecture,\n                disabled: isLoading,\n                children: isLoading ? 'Loading...' : 'New Architecture'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this), architectureInfo && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"architecture-description\",\n              children: architectureInfo.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 38\n            }, this), error ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"error-message\",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(AWSArchitectureDisplay, {\n                architecture: architecture,\n                currentQuestion: currentQuestion\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 21\n              }, this), currentQuestion && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"question-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"question-label\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"highlight\",\n                    children: \"Question:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 402,\n                    columnNumber: 27\n                  }, this), \" \", currentQuestion.text]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"optimization-focus-label\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"highlight\",\n                    children: \"Optimization Focus:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 405,\n                    columnNumber: 27\n                  }, this), \" \", currentQuestion.optimizationFocus]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 25\n                }, this), showFeedback ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `feedback-modal ${feedback.isCorrect ? 'correct' : 'incorrect'} ${feedback.isCorrect && !feedback.isOptimal ? 'sub-optimal' : ''}`,\n                  children: [showSadFace && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"sad-face-overlay\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      role: \"img\",\n                      \"aria-label\": \"sad face\",\n                      className: \"sad-face\",\n                      children: \"\\uD83D\\uDE22\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 412,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 411,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"feedback-content\",\n                    children: [feedback.isCorrect ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        children: [\"\\uD83C\\uDF89 Correct! +\", feedback.points, \" points\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 418,\n                        columnNumber: 35\n                      }, this), feedback.isOptimal ? /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: \"\\uD83C\\uDF1F Perfect choice! This is the optimal solution.\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 420,\n                        columnNumber: 37\n                      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                          children: \"\\u26A0\\uFE0F This answer is correct but not the best option according to the Optimization Focus.\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 423,\n                          columnNumber: 39\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                            style: {\n                              color: 'green'\n                            },\n                            children: \"The optimal answer is:\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 424,\n                            columnNumber: 42\n                          }, this), \" \", architectureInfo.missingServices[currentMissingServiceIndex].options.find(opt => opt.isOptimal).service, \".\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 424,\n                          columnNumber: 39\n                        }, this)]\n                      }, void 0, true)]\n                    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"h3\", {\n                      children: \"\\u274C Not quite right\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 429,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      dangerouslySetInnerHTML: {\n                        __html: feedback.message\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 431,\n                      columnNumber: 31\n                    }, this), currentMissingServiceIndex < (architectureInfo === null || architectureInfo === void 0 ? void 0 : (_architectureInfo$mis = architectureInfo.missingServices) === null || _architectureInfo$mis === void 0 ? void 0 : _architectureInfo$mis.length) - 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"next-button\",\n                      onClick: handleNext,\n                      children: [\"Next Service (\", currentMissingServiceIndex + 2, \" of \", architectureInfo === null || architectureInfo === void 0 ? void 0 : (_architectureInfo$mis2 = architectureInfo.missingServices) === null || _architectureInfo$mis2 === void 0 ? void 0 : _architectureInfo$mis2.length, \")\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 434,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 415,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 27\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"service-options\",\n                  children: currentQuestion.options.map((option, index) => /*#__PURE__*/_jsxDEV(DraggableService, {\n                    service: option,\n                    onClick: () => handleServiceSelection(option.name)\n                  }, `${option.id}-${index}`, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 446,\n                    columnNumber: 31\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"game-status\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progress\",\n                children: architectureInfo !== null && architectureInfo !== void 0 && architectureInfo.missingServices ? `Service ${currentMissingServiceIndex + 1} of ${architectureInfo.missingServices.length}` : 'Learn and have fun!'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"difficulty-selection\",\n              children: ['BEGINNER', 'INTERMEDIATE', 'ADVANCED'].map(level => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `difficulty-button ${difficulty === level ? 'active' : ''}`,\n                onClick: () => handleDifficultyChange(level),\n                children: level.charAt(0) + level.slice(1).toLowerCase()\n              }, level, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://hackthon-backend-files-ep-2024.s3.us-east-1.amazonaws.com/amazon-icons-set/Architecture-Service-Icons_06072024/AWSArchitectureApp.webp\",\n          alt: \"Loading...\",\n          style: {\n            width: '1200px',\n            height: '900px',\n            verticalAlign: 'middle',\n            display: 'inline-block',\n            borderRadius: '50px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 338,\n    columnNumber: 7\n  }, this);\n};\n_s(AWSArchitectureGame, \"sxDKDnXSe6YjuST7B97uTlL3iEQ=\", false, function () {\n  return [useWindowSize, useSensors, useSensor, useSensor];\n});\n_c = AWSArchitectureGame;\nexport default AWSArchitectureGame;\nvar _c;\n$RefreshReg$(_c, \"AWSArchitectureGame\");","map":{"version":3,"names":["React","useState","useCallback","useEffect","DndContext","useSensor","useSensors","PointerSensor","TouchSensor","DndProvider","HTML5Backend","AWSArchitectureDisplay","DraggableService","getCachedServiceIcon","SERVICE_MAPPINGS","ReactConfetti","useWindowSize","jsxDEV","_jsxDEV","Fragment","_Fragment","S3_BUCKET_URL","ICONS_BASE_PATH","API_URL","isValidArchitecture","data","Array","isArray","services","connections","console","warn","requiredMissingServices","serviceNames","map","service","name","every","ms","includes","join","connectionNodes","Set","forEach","conn","add","from","to","has","validateJSONStructure","json","difficulty","missingServices","getMaxPossibleScore","AWSArchitectureGame","_s","_architectureInfo$mis","_architectureInfo$mis2","isLoading","setIsLoading","error","setError","architecture","setArchitecture","architectureInfo","setArchitectureInfo","currentQuestion","setCurrentQuestion","setDifficulty","score","setScore","showFeedback","setShowFeedback","feedback","setFeedback","isCorrect","message","points","currentMissingServiceIndex","setCurrentMissingServiceIndex","questionStartTime","setQuestionStartTime","elapsedTime","setElapsedTime","width","height","showConfetti","setShowConfetti","showFireworks","setShowFireworks","showSadFace","setShowSadFace","sensors","activationConstraint","distance","getServiceIcon","serviceName","toLowerCase","log","cleanedServiceName","replace","potentialS3Url","resolvedIcon","loadNextArchitecture","_data$missingServices","attempt","isValid","maxAttempts","response","fetch","method","headers","body","JSON","stringify","status","Promise","resolve","setTimeout","ok","Error","transformedServices","id","icon","length","currentMissingService","text","question","optimizationFocus","options","opt","isOptimal","explanation","rating","description","Date","now","handleServiceSelection","selectedService","selectedOption","find","correctOption","optimalOption","prevScore","newScore","optimalSolution","optimalExplanation","correctAnswer","handleNext","nextIndex","nextMissingService","handleDifficultyChange","level","timer","setInterval","elapsed","Math","floor","clearInterval","backend","children","style","position","minHeight","className","top","left","zIndex","pointerEvents","recycle","numberOfPieces","fileName","_jsxFileName","lineNumber","columnNumber","toString","padStart","onClick","disabled","role","color","dangerouslySetInnerHTML","__html","option","index","charAt","slice","src","alt","verticalAlign","display","borderRadius","_c","$RefreshReg$"],"sources":["/Users/eimis/test-server/react_projects/cloud-architecture-game copy 20- copy 2/src/components/AWSArchitectureGame.jsx"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\nimport { DndContext, useSensor, useSensors, PointerSensor, TouchSensor } from '@dnd-kit/core';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport AWSArchitectureDisplay from './AWSArchitectureDisplay';\nimport DraggableService from './DraggableService';\nimport { getCachedServiceIcon, SERVICE_MAPPINGS } from '../services/IconResolver';\nimport '../styles/DifficultyButtons.css';\nimport '../styles/AWSArchitectureGame.css';\nimport ReactConfetti from 'react-confetti';\nimport { useWindowSize } from 'react-use';\nimport '../styles/z-index.css';\n\nconst S3_BUCKET_URL = 'https://hackthon-backend-files-ep-2024.s3.amazonaws.com';\nconst ICONS_BASE_PATH = '/amazon-icons-set/Architecture-Service-Icons_06072024';\nconst API_URL = 'https://p7bwtrx47e.execute-api.us-east-1.amazonaws.com/stage/amazon-architecture';\n\nconst isValidArchitecture = (data) => {\n  if (!data || !Array.isArray(data.services) || !Array.isArray(data.connections)) {\n    console.warn(\"⚠️ Invalid JSON structure: Missing 'services' or 'connections'. Retrying...\");\n    return false;\n  }\n\n  const requiredMissingServices = ['missing_1', 'missing_2', 'missing_3'];\n\n  const serviceNames = data.services.map(service => \n    typeof service === 'string' ? service : service?.name\n  );\n\n  if (!requiredMissingServices.every(ms => serviceNames.includes(ms))) {\n    console.warn(`⚠️ JSON is invalid: One or more missing services (${requiredMissingServices.join(', ')}) are missing.`);\n    return false;\n  }\n\n  const connectionNodes = new Set();\n  data.connections.forEach(conn => {\n    connectionNodes.add(conn.from);\n    connectionNodes.add(conn.to);\n  });\n\n  if (!requiredMissingServices.every(ms => connectionNodes.has(ms))) {\n    console.warn(`⚠️ JSON is invalid: One or more missing services (${requiredMissingServices.join(', ')}) are missing from the connections.`);\n    return false;\n  }\n\n  return true;\n};\n\nconst validateJSONStructure = (json, difficulty) => {\n  let requiredMissingServices = ['missing_1', 'missing_2', 'missing_3'];\n\n  if (difficulty === 'INTERMEDIATE') {\n    requiredMissingServices = ['missing_1', 'missing_2', 'missing_3', 'missing_4', 'missing_5'];\n  } else if (difficulty === 'ADVANCED') {\n    requiredMissingServices = ['missing_1', 'missing_2', 'missing_3', 'missing_4', 'missing_5', 'missing_6', 'missing_7'];\n  }\n\n  return requiredMissingServices.every(service => json.missingServices.includes(service));\n};\n\nconst getMaxPossibleScore = (difficulty) => {\n  switch(difficulty) {\n    case 'INTERMEDIATE':\n      return 25; // 5 questions * 5 points\n    case 'ADVANCED':\n      return 35; // 7 questions * 5 points\n    default: // BEGINNER\n      return 15; // 3 questions * 5 points\n  }\n};\n\nconst AWSArchitectureGame = () => {\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState(null);\n    const [architecture, setArchitecture] = useState(null);\n    const [architectureInfo, setArchitectureInfo] = useState(null);\n    const [currentQuestion, setCurrentQuestion] = useState(null);\n    const [difficulty, setDifficulty] = useState('BEGINNER');\n    const [score, setScore] = useState(0); \n    const [showFeedback, setShowFeedback] = useState(false);\n    const [feedback, setFeedback] = useState({ isCorrect: false, message: '', points: 0 });\n    const [currentMissingServiceIndex, setCurrentMissingServiceIndex] = useState(0);\n    const [questionStartTime, setQuestionStartTime] = useState(null);\n    const [elapsedTime, setElapsedTime] = useState(0);\n    const { width, height } = useWindowSize();\n    const [showConfetti, setShowConfetti] = useState(false);\n    const [showFireworks, setShowFireworks] = useState(false);\n    const [showSadFace, setShowSadFace] = useState(false);\n\n    const sensors = useSensors(\n      useSensor(PointerSensor, {\n        activationConstraint: {\n          distance: 8,\n        },\n      }),\n      useSensor(TouchSensor)\n    );\n\n    const getServiceIcon = (serviceName) => {\n      if (!serviceName) {\n        console.error('No service name provided to getServiceIcon');\n        return null;\n      }\n\n      if (serviceName.toLowerCase().includes('missing')) {\n        console.log('Loading missing service icon locally:', '/aws-icons/missing.svg');\n        return '/aws-icons/missing.svg';\n      }\n\n      const cleanedServiceName = serviceName\n        .toLowerCase()\n        .replace(/^(amazon|aws)\\s+/, '')\n        .replace(/\\s+/g, '-');\n        \n      const potentialS3Url = `${S3_BUCKET_URL}${ICONS_BASE_PATH}/Arch_${cleanedServiceName}_64.svg`;\n      console.log(`🔍 Attempting to load icon for \"${serviceName}\" from: ${potentialS3Url}`);\n\n      const resolvedIcon = getCachedServiceIcon(serviceName);\n      \n      if (resolvedIcon) {\n        console.log(`✅ Successfully resolved icon for \"${serviceName}\": ${resolvedIcon}`);\n        return resolvedIcon;\n      }\n\n      console.warn(`❌ Icon not found for \"${serviceName}\" at attempted path: ${potentialS3Url}`);\n      return '/aws-icons/default.svg';\n    };\n\n    const loadNextArchitecture = useCallback(async () => {\n      setScore(0); // Reset score when loading new architecture\n      if (isLoading) return;\n      setIsLoading(true);\n      setError(null);\n\n      let attempt = 0;\n      let isValid = false;\n      let data = null;\n      let maxAttempts = 7;\n\n      while (!isValid && attempt < maxAttempts) {\n        try {\n          console.log(`🔄 Attempt ${attempt + 1}: Fetching architecture data...`);\n          const response = await fetch(API_URL, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ difficulty })\n          });\n\n          if (response.status === 503) {\n            console.warn(\"⚠️ Received 503 error. Retrying in 3 seconds...\");\n            attempt++;\n            await new Promise(resolve => setTimeout(resolve, 3000));\n            continue;\n          }\n\n          if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n\n          data = await response.json();\n          console.log('Raw AI Response:', JSON.stringify(data, null, 2));\n          console.log(\"📥 Received AI Response:\", JSON.stringify(data, null, 2));\n\n          isValid = isValidArchitecture(data);\n\n          if (!isValid) {\n            console.warn(`⛔ Invalid JSON structure. Retrying in 3 seconds...`);\n            await new Promise(resolve => setTimeout(resolve, 3000));\n          } else {\n            console.log(\"✅ Valid architecture received, updating state...\");\n            break;\n          }\n        } catch (error) {\n          console.error(\"❌ Failed to load architecture:\", error);\n          if (attempt >= maxAttempts - 1) {\n            setError(error.message);\n            setIsLoading(false);\n            return;\n          }\n          await new Promise(resolve => setTimeout(resolve, 3000)); // Wait 3 seconds before retrying\n        }\n\n        attempt++;\n      }\n\n      if (!isValid) {\n        console.error(\"❌ Maximum retries reached. Unable to get valid JSON.\");\n        setError(\"Failed to fetch a valid architecture after multiple attempts.\");\n        setIsLoading(false);\n        return;\n      }\n\n      const transformedServices = data.services.map(serviceName => ({\n        id: serviceName.toLowerCase().replace(/[^a-z0-9]+/g, '-'),\n        name: serviceName,\n        icon: getServiceIcon(serviceName)\n      }));\n\n      setArchitecture({\n        services: transformedServices,\n        connections: data.connections\n      });\n\n      if (data.missingServices?.length > 0) {\n        const currentMissingService = data.missingServices[0];\n        setCurrentQuestion({\n          text: currentMissingService.question,\n          optimizationFocus: currentMissingService.optimizationFocus,\n          options: currentMissingService.options.map(opt => ({\n            id: opt.service.toLowerCase().replace(/\\s+/g, '-'),\n            name: opt.service,\n            isCorrect: opt.isCorrect,\n            isOptimal: opt.isOptimal,\n            explanation: opt.explanation,\n            rating: opt.rating,\n            icon: getServiceIcon(opt.service)\n          }))\n        });\n      }\n\n      setArchitectureInfo({\n        name: data.architecture.name,\n        description: data.architecture.description,\n        missingServices: data.missingServices\n      });\n\n      setCurrentMissingServiceIndex(0);\n      setShowFeedback(false);\n      setQuestionStartTime(Date.now());\n      setElapsedTime(0);\n      setIsLoading(false);\n    }, [difficulty]);\n\n    const handleServiceSelection = (selectedService) => {\n      if (!architectureInfo?.missingServices) return;\n      \n      const currentMissingService = architectureInfo.missingServices[currentMissingServiceIndex];\n      const selectedOption = currentMissingService.options.find(opt => opt.service === selectedService);\n      const correctOption = currentMissingService.options.find(opt => opt.isCorrect);\n      const optimalOption = currentMissingService.options.find(opt => opt.isOptimal);\n\n      if (selectedOption) {\n        setShowFeedback(true);\n        if (selectedOption.isCorrect) {\n          // Calculate points based on whether it's optimal or just correct\n          const points = selectedOption.isOptimal ? 5 : 2;\n          \n          setScore(prevScore => {\n            const newScore = prevScore + points;\n            // Check if we've reached the maximum possible score for current difficulty\n            if (newScore === getMaxPossibleScore(difficulty)) {\n              setShowFireworks(true);\n              setTimeout(() => setShowFireworks(false), 5000);\n            }\n            return newScore;\n          });\n          \n          if (selectedOption.isOptimal) {\n            setShowConfetti(true);\n            setTimeout(() => setShowConfetti(false), 2000);\n          }\n\n          setFeedback({\n            isCorrect: true,\n            message: selectedOption.explanation,\n            points: points,\n            isOptimal: selectedOption.isOptimal,\n            optimalSolution: !selectedOption.isOptimal ? optimalOption.service : null,\n            optimalExplanation: !selectedOption.isOptimal ? optimalOption.explanation : null\n          });\n        } else {\n          setShowSadFace(true);\n          setTimeout(() => setShowSadFace(false), 4000);\n\n          setFeedback({\n            isCorrect: false,\n            message: `<div class=\"feedback-explanation\">\n              <p>${selectedOption.explanation}</p>\n              <div class=\"correct-answer-wrapper\">\n                <p class=\"correct-answer-section\">\n                  <span style=\"color: lime; font-weight: bold;\">The correct answer was: </span>\n                  <strong>${correctOption.service}</strong>. ${correctOption.explanation}\n                </p>\n              </div>\n            </div>`,\n            points: 0,\n            correctAnswer: correctOption.service\n          });\n        }\n      }\n    };\n\n    const handleNext = () => {\n      if (!architectureInfo?.missingServices) return;\n      \n      setShowFeedback(false);\n      if (currentMissingServiceIndex < architectureInfo.missingServices.length - 1) {\n        const nextIndex = currentMissingServiceIndex + 1;\n        setCurrentMissingServiceIndex(nextIndex);\n        \n        const nextMissingService = architectureInfo.missingServices[nextIndex];\n        setCurrentQuestion({\n          text: nextMissingService.question,\n          optimizationFocus: nextMissingService.optimizationFocus,\n          options: nextMissingService.options.map(opt => ({\n            id: opt.service.toLowerCase().replace(/\\s+/g, '-'),\n            name: opt.service,\n            isCorrect: opt.isCorrect,\n            isOptimal: opt.isOptimal,\n            explanation: opt.explanation,\n            rating: opt.rating,\n            icon: getServiceIcon(opt.service)\n          }))\n        });\n        setQuestionStartTime(Date.now());\n        setElapsedTime(0);\n      }\n    };\n\n    const handleDifficultyChange = (level) => {\n      setDifficulty(level);\n    };\n\n    useEffect(() => {\n      if (currentQuestion && !questionStartTime) {\n        setQuestionStartTime(Date.now());\n      }\n\n      const timer = setInterval(() => {\n        if (questionStartTime && !showFeedback) {\n          const elapsed = Math.floor((Date.now() - questionStartTime) / 1000);\n          setElapsedTime(elapsed);\n        }\n      }, 1000);\n\n      return () => clearInterval(timer);\n    }, [currentQuestion, questionStartTime, showFeedback]);\n\n    return (\n      <DndProvider backend={HTML5Backend}>\n        <DndContext sensors={sensors}>\n          <div style={{ position: 'relative', minHeight: '100vh' }}>\n            <div className=\"game-content\">\n              {showConfetti && (\n                <div style={{ \n                  position: 'fixed',\n                  top: 0,\n                  left: 0,\n                  width: '100%',\n                  height: '100%',\n                  zIndex: 1000,\n                  pointerEvents: 'none'\n                }}>\n                  <ReactConfetti\n                    width={width}\n                    height={height}\n                    recycle={false}\n                    numberOfPieces={200}\n                  />\n                </div>\n              )}\n              <div className=\"game-container\">\n                <div className=\"game-header\">\n                  <h2>{architectureInfo?.name || 'AWS Architecture Challenge'}</h2>\n                  <div className=\"game-stats\">\n                    <div className=\"score\">Score: {score}</div>\n                    <div className=\"complexity\">\n                      <span className=\"complexity-icon\">🎯</span>\n                      {difficulty}\n                    </div>\n                    {currentQuestion && !showFeedback && (\n                      <div className={`timer ${\n                        elapsedTime > 60 ? 'danger' : \n                        elapsedTime > 30 ? 'warning' : ''\n                      }`}>\n                        <span className=\"timer-icon\">⏱️</span>\n                        {Math.floor(elapsedTime / 60)}:{(elapsedTime % 60).toString().padStart(2, '0')}\n                      </div>\n                    )}\n                  </div>\n                  <button \n                    className=\"new-architecture-button\"\n                    onClick={loadNextArchitecture}\n                    disabled={isLoading}\n                  >\n                    {isLoading ? 'Loading...' : 'New Architecture'}\n                  </button>\n                </div>\n                \n                {architectureInfo && <p className=\"architecture-description\">{architectureInfo.description}</p>}\n                \n                {error ? (\n                  <div className=\"error-message\">{error}</div>\n                ) : (\n                  <>\n                    <AWSArchitectureDisplay \n                      architecture={architecture}\n                      currentQuestion={currentQuestion}\n                    />\n                    \n                    {currentQuestion && (\n                      <div className=\"question-container\">\n                        <h3 className=\"question-label\">\n                          <span className=\"highlight\">Question:</span> {currentQuestion.text}\n                        </h3>\n                        <p className=\"optimization-focus-label\">\n                          <span className=\"highlight\">Optimization Focus:</span> {currentQuestion.optimizationFocus}\n                        </p>\n                        \n                        {showFeedback ? (\n                          <div className={`feedback-modal ${feedback.isCorrect ? 'correct' : 'incorrect'} ${feedback.isCorrect && !feedback.isOptimal ? 'sub-optimal' : ''}`}>\n                            {showSadFace && (\n                              <div className=\"sad-face-overlay\">\n                                <span role=\"img\" aria-label=\"sad face\" className=\"sad-face\">😢</span>\n                              </div>\n                            )}\n                            <div className=\"feedback-content\">\n                              {feedback.isCorrect ? (\n                                <>\n                                  <h3>🎉 Correct! +{feedback.points} points</h3>\n                                  {feedback.isOptimal ? (\n                                    <p>🌟 Perfect choice! This is the optimal solution.</p>\n                                  ) : (\n                                    <>\n                                      <p>⚠️ This answer is correct but not the best option according to the Optimization Focus.</p>\n                                      <p><span style={{ color: 'green' }}>The optimal answer is:</span> {architectureInfo.missingServices[currentMissingServiceIndex].options.find(opt => opt.isOptimal).service}.</p>\n                                    </>\n                                  )}\n                                </>\n                              ) : (\n                                <h3>❌ Not quite right</h3>\n                              )}\n                              <p dangerouslySetInnerHTML={{ __html: feedback.message }}></p>\n                              \n                              {currentMissingServiceIndex < (architectureInfo?.missingServices?.length - 1) && (\n                                <button \n                                  className=\"next-button\"\n                                  onClick={handleNext}\n                                >\n                                  Next Service ({currentMissingServiceIndex + 2} of {architectureInfo?.missingServices?.length})\n                                </button>\n                              )}\n                            </div>\n                          </div>\n                        ) : (\n                          <div className=\"service-options\">\n                            {currentQuestion.options.map((option, index) => (\n                              <DraggableService\n                                key={`${option.id}-${index}`}\n                                service={option}\n                                onClick={() => handleServiceSelection(option.name)}\n                              />\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </>\n                )}\n                \n                <div className=\"game-status\">\n                  <div className=\"progress\">\n                    {architectureInfo?.missingServices ? \n                      `Service ${currentMissingServiceIndex + 1} of ${architectureInfo.missingServices.length}` :\n                      'Learn and have fun!'\n                    }\n                  </div>\n                </div>\n\n                <div className=\"difficulty-selection\">\n                  {['BEGINNER', 'INTERMEDIATE', 'ADVANCED'].map((level) => (\n                    <button\n                      key={level}\n                      className={`difficulty-button ${difficulty === level ? 'active' : ''}`}\n                      onClick={() => handleDifficultyChange(level)}\n                    >\n                      {level.charAt(0) + level.slice(1).toLowerCase()}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n          <br></br>\n          <center>\n          <img \n              src=\"https://hackthon-backend-files-ep-2024.s3.us-east-1.amazonaws.com/amazon-icons-set/Architecture-Service-Icons_06072024/AWSArchitectureApp.webp\"\n                    alt=\"Loading...\" \n                    style={{ \n                      width: '1200px',\n                      height: '900px',\n                      verticalAlign: 'middle',\n                      display: 'inline-block',\n                      borderRadius: '50px'\n                    }} \n                  />\n          </center>\n        </DndContext>\n      </DndProvider>\n    );\n};\n\nexport default AWSArchitectureGame;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}